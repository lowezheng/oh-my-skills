---
description: 提取对话中的需求和规则并更新AGENTS.md
subtask: false
---

# 功能说明
    本命令用于从当前对话历史中提取需求/交互内容，整理出对本项目有通用指导价值的规则，供用户选择是否追加到 AGENTS.md 文件。
# 使用场景
    - 项目规划/设计讨论后提取通用规则
    - 需要记录项目特定的开发指导原则
    - 对话中发现了可复用的代码规范或约定
    - 补充现有 AGENTS.md 的规则内容
# 如何操作
## 0. 操作原则
    请分析当前对话历史，提取出以下内容：
    1. 本次规划/讨论中的需求/交互内容 - 涉及功能、设计、技术选型等
    2. 对本项目有通用指导价值的规则 - 可在后续开发中复用的规范、约定、最佳实践
    
    规则整理格式：
    ```
    ## [类别] - [规则标题]
    [规则详细描述]
    ```
    
    常见类别示例：代码规范、架构设计、流程约定、安全规范、性能要求等

## 1. 提取需求和交互内容
    - 遍历当前会话的对话历史，识别关键需求点
    - 提取技术决策和设计讨论
    - 记录涉及的功能模块和职责
    - 汇总相关的约束条件（如兼容性、性能等）

## 2. 识别通用规则
    - 从需求和交互内容中提炼可复用的指导原则
    - 关注可应用于多个场景的约定
    - 识别与本项目技术栈相关的最佳实践
    - 提取明确的"应该/不应该"类规则

## 3. 整理规则条目
    - 将识别出的规则按类别分组
    - 每条规则使用清晰的标题和描述
    - 确保规则表述简洁、无歧义
    - 提供示例或上下文（如有必要）

## 4. 读取现有 AGENTS.md
    - 使用 Read 工具读取项目根目录的 AGENTS.md 文件
    - 如果文件不存在，记录为空
    - 识别现有规则的类别和结构，保持一致性

## 5. 呈现规则列表供用户选择
    - 以结构化方式展示所有提取的规则
    - 提供清晰的选项让用户确认是否追加
    - 可支持全选、部分选择或全部拒绝

## 6. 追加规则到 AGENTS.md
    - 根据用户选择，将确认的规则追加到 AGENTS.md
    - 保持与现有内容的格式一致
    - 在适当位置插入（如相关类别下或文件末尾）
    - 避免重复规则（检查相似内容）

